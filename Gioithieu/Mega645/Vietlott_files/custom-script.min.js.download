var _TabCommunicate=function(){var a=Math.random().toString().substr(4),b={},c=function(a){console.log("Other tabs sent data",a)},d=function(d){if(d.key=="IZIHelp-chat-communicate")try{var e=JSON.parse(localStorage.getItem("IZIHelp-chat-communicate"));if(e._tab_name==a)return;var f={key:e.key,value:e.value};(b[e.key]||c)(f)}catch(a){return console.log("IZICommunication",a),c(d)}};window.addEventListener?window.addEventListener("storage",d,!1):window.attachEvent("onstorage",d),this.send=function(b,c){var d={_time_stamp:new Date().getTime(),_tab_name:a,_comm_key:"IZIHelp-chat-communicate",key:b,value:c};localStorage.setItem("IZIHelp-chat-communicate",JSON.stringify(d))},this.addListener=function(a,c){b[a]=c},this.removeListener=function(a){delete b[a]}};function _LocalData(){var a=this,b={};this.val=function(c,d,e){return void 0!==d&&(void 0===b[c]&&("string"==typeof d?b[c]="":b[c]=0),e?b[c]+=d:b[c]=d,a[c]=b[c]),b[c]},this.clearVal=function(c){delete b[c],delete a[c]},this.obj=function(a,c,d){return b[a]=b[a]||{},void 0!==d&&(b[a][c]=d),b[a][c]},this.clearObj=function(a,c){b[a]=b[a]||{},delete b[a][c]},this.localSetting=function(a,b){var c={};try{var d=localStorage.getItem("IZIChat-widget-data")||"";c=JSON.parse(d)||{}}catch(a){c={}}return void 0===b?c[a]:(c[a]=b,localStorage.setItem("IZIChat-widget-data",JSON.stringify(c)),c[a])},this.list=function(){return b},this.clear=function(){localStorage.removeItem("IZIChat-widget-data")}}function _DOMManage(a){function b(a,b){var c=a["on"+b];a["on"+b]=function(d){for(var e=0;e<f[b].length;e++)f[b][e](d,a);c&&c(d,a)}}function c(a){var b=document.createElement("div");return b.innerHTML=a,b.childNodes}var d=this,f={};this.DOMs=void 0===a.length?[a]:a,this.toDOM=function(){return this.DOMs[0]},this.remove=function(){for(var a=0;a<d.DOMs.length;a++)d.DOMs[a].remove();return d},this.length=function(){return d.DOMs.length},this.attr=function(a,b){if(b!==void 0)for(var c=0;c<d.DOMs.length;c++)d.DOMs[c].setAttribute(a,b);else return 0==d.DOMs.length?void 0:d.DOMs[0].getAttribute(a)},this.imgSrc=function(a){return d.attr("src",a)},this.title=function(a){return d.attr("title",a)},this.disable=function(a){if(a!==void 0)for(var b=0;b<d.DOMs.length;b++)d.DOMs[b].disabled=a;else return 0==d.DOMs.length?void 0:d.DOMs[0].disabled;return d},this.style=function(a,b,c){if(b!==void 0)for(var e=0;e<d.DOMs.length;e++)d.DOMs[e].style.setProperty(a,b,c);else return 0==d.DOMs.length?void 0:d.DOMs[0].style[a];return d},this.removeStyle=function(a){for(var b=0;b<d.DOMs.length;b++)d.DOMs[b].style.removeProperty(a);return d},this.data=function(a,b){if(b!==void 0)for(var c=0;c<d.DOMs.length;c++)d.DOMs[c].setAttribute("data-"+a,b);else return 0==d.DOMs.length?void 0:d.DOMs[0].getAttribute("data-"+a);return d},this.hasClass=function(a){return 0==d.DOMs.length?void 0:d.DOMs[0].classList.contains(a)},this.addClass=function(a){for(var b=0;b<d.DOMs.length;b++)d.DOMs[b].classList.add(a);return d},this.removeClass=function(a){for(var b=0;b<d.DOMs.length;b++)d.DOMs[b].classList.remove(a);return d},this.toggleClass=function(a){for(var b=0;b<d.DOMs.length;b++)d.DOMs[b].classList.contains(a)?d.DOMs[b].classList.remove(a):d.DOMs[b].classList.add(a);return d},this.focus=function(){return 0<d.DOMs.length&&d.DOMs[0].focus(),d},this.show=function(a){return a?d.style("display",a):d.removeStyle("display"),d},this.hide=function(){return d.style("display","none"),d},this.toggleDisplay=function(a){for(var b,c=0;c<d.DOMs.length;c++)b="none"==d.DOMs[c].style.display?a||"":"none",d.DOMs[c].style.display=b;return d},this.html=function(a,b){if(a!==void 0){for(var c=0;c<d.DOMs.length;c++)b?d.DOMs[c].innerHTML+=a:d.DOMs[c].innerHTML=a;return d}return 0==d.DOMs.length?void 0:d.DOMs[0].innerHTML},this.val=function(a,b){if(a!==void 0){for(var c=0;c<d.DOMs.length;c++)b&&(a=d.DOMs[c].value+a),d.DOMs[c].value=a;return d}return 0==d.DOMs.length?void 0:d.DOMs[0].value},this.text=function(){return 0==d.DOMs.length?void 0:d.DOMs[0].innerText||d.DOMs[0].textContent},this.replace=function(a){if(a!==void 0)for(var b=0;b<d.DOMs.length;b++)d.DOMs[b].outerHTML=a;return d},this.empty=function(a){if(!a)for(var b=0;b<d.DOMs.length;b++)d.DOMs[b].innerHTML="";else for(var c,b=0;b<d.DOMs.length;b++){c=d.DOMs[b].querySelectorAll(a);for(var e=0;e<c.length;e++)d.DOMs[b].removeChild(c[e])}return d},this.append=function(a){if(a!==void 0)for(var b,e=0;e<d.DOMs.length;e++)for(b=c(a);b.length;)d.DOMs[e].appendChild(b.item(0));return d},this.prepend=function(a){if(a!==void 0)for(var b,e=0;e<d.DOMs.length;e++)for(b=c(a);b.length;)d.DOMs[e].insertBefore(b.item(0),d.DOMs[e].firstChild);return d},this.appendBefore=function(a,b){if(a!==void 0)for(var e=0;e<d.DOMs.length;e++){var f=c(a),g=d.DOMs[e].querySelector(b);if(g)for(;f.length;)d.DOMs[e].insertBefore(f.item(0),g);else for(;f.length;)d.DOMs[e].appendChild(f.item(0))}return d},this.checked=function(a){for(var b=0;b<d.DOMs.length;b++)d.DOMs[b].checked=a;return d},this.find=function(a){for(var b=[],c=0;c<d.DOMs.length;c++)for(var e=d.DOMs[c],f=e.querySelectorAll(a),c=0;c<f.length;c++)b.push(f[c]);return new _DOMManage(b)},this.scrollToBottom=function(a,b){function c(a){setTimeout(function(){a.scrollTop=999999},200)}for(var e,f=0;f<d.DOMs.length;f++)e=d.DOMs[f],a&&a(),(b||100>=e.scrollHeight-e.scrollTop-e.offsetHeight)&&c(e);return d},this.closest=function(a){for(var b=[],c=0;c<d.DOMs.length;c++)for(var e=d.DOMs[c],f=e.parentNode.querySelectorAll(a),c=0;c<f.length;c++)b.push(f[c]);return new _DOMManage(b)},this.closestParent=function(a){for(var b=[],c=0;c<d.DOMs.length;c++)b.push(d.DOMs[c]);var e;do{if(e=b.pop(),!e)return;if(e.matches&&e.matches(a))return e;if(e.mozMatchesSelector&&e.mozMatchesSelector(a))return e;if(e.msMatchesSelector&&e.msMatchesSelector(a))return e;if(e.webkitMatchesSelector&&e.webkitMatchesSelector(a))return e;if(e.oMatchesSelector&&e.oMatchesSelector(a))return e;e.parentNode!=document.body&&b.push(e.parentNode)}while(b.length)},this.ancestor=function(a){if(0!=d.DOMs.length){var b=d.closestParent(a);return new _DOMManage(b?[b]:[])}},this.relative=function(a){for(var b=[],c=0;c<d.DOMs.length;c++){dom=d.DOMs[c];for(var e=dom.parentNode;e;){for(var f=e.querySelectorAll(a),g=0;g<f.length;g++)b.push(f[g]);if(e=e.parentNode,f.length)return new _DOMManage(b)}}return new _DOMManage(b)},this.nextChild=function(a,b){for(var c=document.querySelector(a),e=0;e<d.DOMs.length;e++)if(d.DOMs[e]==c){if(b=b||1,0<b){var f=e+b;return f<d.DOMs.length?d.DOMs[f]:(f=e-b,0<=f?d.DOMs[f]:void 0)}if(0>b){var f=e+b;return 0<=f?d.DOMs[f]:(f=e-b,f<d.DOMs.length?d.DOMs[f]:void 0)}return}},this.click=function(a,c){c&&(f.click=[]),f.click=f.click||[],f.click.push(a);for(var e=0;e<d.DOMs.length;e++)b(d.DOMs[e],"click");return d},this.clickOn=function(a,c,e){e&&(f.click=[]),f.click=f.click||[],f.click.push(function(b,d){for(var e=b.target;e&&e!=d;){for(var f=d.querySelectorAll(a),g=0;g<f.length;g++)if(f[g]==e)return c(b,e,d);e=e.parentNode}});for(var g=0;g<d.DOMs.length;g++)b(d.DOMs[g],"click");return d},this.clickOut=function(a,c,e){e&&(f.click=[]);var g=document.querySelectorAll(a);f.click=f.click||[],f.click.push(function(a,b){for(var d=a.target;d;){for(var e=0;e<g.length;e++)if(d==g[e])return;d=d.parentNode}return c(a,b)});for(var h=0;h<d.DOMs.length;h++)b(d.DOMs[h],"click");return d},this.keyUp=function(a,c){c&&(f.keyup=[]),f.keyup=f.keyup||[],f.keyup.push(a);for(var e=0;e<d.DOMs.length;e++)b(d.DOMs[e],"keyup");return d},this.keyDown=function(a,c){c&&(f.keydown=[]),f.keydown=f.keydown||[],f.keydown.push(a);for(var e=0;e<d.DOMs.length;e++)b(d.DOMs[e],"keydown");return d},this.change=function(a,c){c&&(f.change=[]),f.change=f.change||[],f.change.push(a);for(var e=0;e<d.DOMs.length;e++)b(d.DOMs[e],"change");return d}}var _Util=function(a){var b=Math.round;function c(a){var b="";for(var c in a)b&&(b+="&"),b+=c+"="+encodeURIComponent(a[c]);return b}function d(a,b,d,f){const i=h,k=axios.create({baseURL:i,headers:g});let l,m={authorization:toAuthToken(j.localSetting(tokenHeader()))};switch(d instanceof FormData||(d=c(e.removeEmptyAttr(d)),m["Content-type"]="application/x-www-form-urlencoded; charset=UTF-8"),(b+"").toUpperCase()){case"GET":l=k.get(a,{headers:m});break;case"HEAD":l=k.head(a,{headers:m});break;case"OPTIONS":l=k.options(a,{headers:m});break;case"DELETE":l=k.delete(a,{data:d,headers:m});break;case"POST":l=k.post(a,d,{headers:m});break;case"PUT":l=k.put(a,d,{headers:m});break;case"PATCH":l=k.patch(a,d,{headers:m});}return l?l.then(a=>f(a.data||{})).catch(a=>f({errors:a})):f({errors:"invalid_method"})}var e=this,f={},g={engine:"authToken"},h="",j=(a||{}).localdata||new _LocalData;this.find=function(a,b){if(b||!f[a]){var c=document.querySelectorAll(a);return 0<c.length?f[a]=new _DOMManage(c):new _DOMManage(c)}return f[a]},this.dom=function(a){return new _DOMManage(a)},this.bytesToSize=function(a){var c=Math.log;if(0==a)return"0 Bytes";var d=parseInt(Math.floor(c(a)/c(1024)));return b(a/Math.pow(1024,d),2)+" "+["Bytes","KB","MB","GB","TB"][d]},this.ajaxHeader=function(a,b){g[a]=b},this.ajaxBaseUrl=function(a){h=a},this.ajax=function(a,b,f,k){if(window.axios)return d(a,b,f,k);var l;l=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),l.onreadystatechange=function(){if(4==l.readyState)if(200==l.status)try{k&&k(JSON.parse(l.responseText))}catch(a){k&&k(l.responseText)}else k&&k({status:l.status,errors:l.responseText})},l.open(b,h+a,!0);const m={...g,authorization:toAuthToken(j.localSetting(tokenHeader()))};for(var n in m)l.setRequestHeader(n,m[n]);-1==["post","put"].indexOf(b.toLowerCase())?l.send():(!(f instanceof FormData)&&(f=c(e.removeEmptyAttr(f)),l.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8")),l.send(f))},this.jsonp=function(a,c){var d="jsonp_callback_"+b(1e5*Math.random());window[d]=function(a){delete window[d],document.body.removeChild(e),c(a)};var e=document.createElement("script");e.src=a+(0<=a.indexOf("?")?"&":"?")+"callback="+d,document.body.appendChild(e)},this.objectToQuery=function(a){var b=[];for(var c in a)if(void 0!==a[c]){var d=encodeURIComponent(c),e=encodeURIComponent(a[c]);b.push(d+"="+e)}return"?"+b.join("&")},this.removeEmptyAttr=function(a){var b={};for(var c in a)void 0!==a[c]&&(b[c]=a[c]);return b},this.runTasks=function(a,b){function c(d){if(d>=a.length)return b();try{var e=a[d];return e.param?e.func(e.param,function(a){return a?b(a):c(d+1)}):e.func(function(a){return a?b(a):c(d+1)})}catch(a){return b(a)}}c(0)},this.toBase64=function(a){return window.btoa(escape(a))},this.isValidEmail=function(a){return /^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i.test(a)},this.isValidObjectId=function(a){return /^[0-9a-z]{24}$/gi.test(a)},this.getUrls=function(a){return(a||"").match(/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi)||[]},this.closestParent=function(a,b){var c,d=[a];do{if(c=d.pop(),!c)return;if(c.matches&&c.matches(b))return c;if(c.mozMatchesSelector&&c.mozMatchesSelector(b))return c;if(c.msMatchesSelector&&c.msMatchesSelector(b))return c;if(c.webkitMatchesSelector&&c.webkitMatchesSelector(b))return c;if(c.oMatchesSelector&&c.oMatchesSelector(b))return c;c.parentNode!=document.body&&d.push(c.parentNode)}while(d.length)},this.browserName=function(){var a=!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/");if(a)return"opera";var b="undefined"!=typeof InstallTrigger;if(b)return"firefox";var c=0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")||function(a){return"[object SafariRemoteNotification]"===a.toString()}(!window.safari||safari.pushNotification);if(c)return"safari";var d=/*@cc_on!@*/!!document.documentMode;if(d)return"ie";var e=!d&&!!window.StyleMedia;if(e)return"edge";var f=!!window.chrome&&!!window.chrome.webstore;if(f)return"chrome";(f||a)&&!!window.CSS}};function _Template(a){function b(a){if(!e[a]){var b=document.querySelector("#"+f+a);if(!b)return"";var c=b.innerHTML.trim();if(0<c.length){for(var d in g){var h=RegExp("==t."+d+"==","g");c=c.replace(h,g[d])}e[a]=c}else return""}return e[a]}function c(a){for(var b in g){var c=RegExp("==t\\."+b+"==","g");a=a.replace(c,g[b])}return a}var d=this,e={},f=a||"",g={};this.translation=function(a){return void 0!==a&&(g=a),g},this.translate=function(a){for(var b=document.querySelectorAll(a+" [data-i18n]"),d=0;d<b.length;d++){var e=b[d],f=e.attributes["data-i18n"].value,g="innerHTML",h=f.indexOf("]");-1!=h&&(g=f.substr(1,h-1),f=f.substr(h+1)),"innerHTML"!=g&&(e[g]=c(f)),e.innerHTML=c(e.innerHTML)}},this.fillTemplate=function(a,c,d){c=c||{},d=d||{};for(var e=b(a),f=[{key:"",html:""}],g="",h=0,j=0;j<e.length;j++){if("]"==e[j]&&"#"==e[j+1]&&1<f.length){var k=f.pop();h--,d[k.key]&&(f[h].html+=k.html),j++;continue}if("#"==e[j]&&"]"!=e[j+1]){g="#";continue}if(g){"A"<=e[j]&&"Z">=e[j]||"_"==e[j]?g+=e[j]:"["==e[j]?(f.push({key:g.substr(1),html:""}),h++,g=""):(f[h].html+=g+e[j],g="");continue}f[h].html+=e[j]}for(var l="",j=0;j<f.length;j++)l+=f[j].html;for(var j in c){var m=RegExp("=="+j+"==","g");l=l.replace(m,c[j])}return l.replace(/#[0-9A-Z_]+\[.+\]#/g,"").replace(/==[0-9A-Z_]+==/g,"").replace(/\n|\b/g,"")},this.fillArrayTemplate=function(a,b){var c="";return(b||[]).forEach(function(b){c+=d.fillTemplate(a,b.params,b.display)}),c},this.prefix=function(a){return f=a,d}}function _Emoji(){var a={},b=new _Template,c=window.__iziconfig.get("clientAssets")+"img/emoji/",d=".png",e=["1_up","1_down","100","airplane","alarm_clock","alien","angel","angry","anguished","ant","apple","art","baby","balloon","banana","bath","battery","bear","bee","beers","bike","bikini","birthday","blue_heart","blush","boar","bomb","bowtie","broken_heart","cactus","candy","cat2","cherry_blossom","chicken","christmas_tree","clap","coffee","cold_sweat","confounded","confused","couplekiss","cow","cry","cupid","dart","disappointed","disappointed_relieved","dizzy_face","dog","dollar","expressionless","facepunch","fearful","flushed","fork_and_knife","frog","fu","full_moon_with_face","ghost","gift_heart","grin","grinning","gun","hand","heart","heart_eyes","hushed","innocent","japanese_ogre","joy","key","kiss","kissing_face","kissing_heart","last_quarter_moon_with_face","laughing","lock","loudspeaker","love_letter","mag","mask","moyai","muscle","neckbeard","neutral_face","new_moon_with_face","no_mouth","ok_hand","panda_face","pensive","pig","pill","punch","purple_heart","question","rage","rage1","raised_hand","ramen","relieved","rose","santa","scream","shaved_ice","shit","sleeping","smile","smirk","snail","snowman","sob","speak_no_evil","speech_balloon","sunglasses","sun_with_face","sweat","tired_face","trollface","turtle","unamused","v","weary","worried","zzz"];e.forEach(function(b){a[":"+b+":"]="<img src='__SRC__' title='__TITLE__' class='__CLASS__'/>".replace("__TITLE__",b).replace("__SRC__",c+b+d).replace("__CLASS__","izi_chat_img_emoji")}),_Emoji.prototype.toHtml=function(b){for(var c="",d="",f=0;f<b.length;f++)":"==b[f]?(c+=b[f],1<c.length&&(d+=a[c]?a[c]:c,c="")):c?c+=b[f]:d+=b[f];return d+c},_Emoji.prototype.parseContent=function(a,f){var g=a||"",h=g.match(/:[a-z_0-9+-]+:/g)||[],i={},j=[];return h.forEach(function(a){var b=a.substr(1,a.length-2);return void 0===i[b]&&void(i[b]=!i[b]&&-1!=e.indexOf(b),i[b]&&j.push(b))}),j.forEach(function(a){g=g.split(":"+a+":").join(b.fillTemplate(f,{EMOJI_SRC:c+a+d,EMOJI_NAME:":"+a+":"}))}),g},_Emoji.prototype.list=function(a,f){for(var g="",h=0,j=e.length;j>h;h++)g+=b.prefix(f||"").fillTemplate(a,{EMOJI_SRC:c+e[h]+d,EMOJI_NAME:e[h]});return g}}function _Timer(){var a={},b={};this.set=function(b){a[b]=new Date},this.diffNow=function(b){return a[b]?new Date-a[b]:-1},this.next=function(a,c,d){b[a]&&clearTimeout(b[a]),b[a]=setTimeout(function(){b[a]=void 0,d()},c)},this.hasNext=function(a){return b[a]!==void 0},this.clearNext=function(a){clearTimeout(b[a]),b[a]=void 0}}window.isEmptyObject=function(a){return!a||"object"!=typeof a||0==Object.keys(a).length},window.toObject=function(a){if("string"==typeof a)try{return JSON.parse(a)}catch(a){return{}}return a},window.toSubdomain=a=>{const b=(a||"").replace(/^(https?:\/\/)?(www)?([^.:]+).*$/,"$3");return b},window.tokenHeader=()=>{const a=toSubdomain(widgetURL.searchParams.get("origin")||"");return a+".authorization"},window.toAuthToken=a=>new URL(widgetURL.searchParams.get("origin")).host+":"+(a||"");